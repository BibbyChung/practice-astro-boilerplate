import{i as ne}from"./lifecycle.B07NYewA.js";import{h as re,i as N,j as de,E as ce,k as ie,H as ue,l as fe,m as ve,n as W,o as me,q as z,u as w,U as pe,v as _e,w as be,x as he,y as xe,z as ge,A as Te,B as ye,C as ke,D as $e,f as K,t as G,e as g,g as b,b as L,p as we,c as Ae,d as v,s as p,r as i,F as J,G as Se,I as M}from"./template.CAJb6BCw.js";import{s as B}from"./render.B6QH5glD.js";import{e as Ce,s as Ee,a as P}from"./store.BU_X3u8e.js";import{r as Y,s as De,a as Ve}from"./attributes.CjvfQtcJ.js";import{g as Ie}from"./util.B4kyCxWd.js";import{m as Z}from"./map.BidrtvmN.js";function Le(e,a,l=!1){N&&de();var u=e,r=null,n=null,s=pe,T=l?ce:0,_=!1;const R=(f,c=!0)=>{_=!0,y(c,f)};var m=null;function E(){m!==null&&(m.lastChild.remove(),u.before(m),m=null);var f=s?r:n,c=s?n:r;f&&be(f),c&&he(c,()=>{s?n=null:r=null})}const y=(f,c)=>{if(s===(s=f))return;let k=!1;if(N){const j=ie(u)===ue;!!s===j&&(u=fe(),ve(u),W(!1),k=!0)}var h=_e(),A=u;if(h&&(m=document.createDocumentFragment(),m.append(A=me())),s?r??=c&&z(()=>c(A)):n??=c&&z(()=>c(A)),h){var x=w,S=s?r:n,$=s?n:r;S&&x.skipped_effects.delete(S),$&&x.skipped_effects.add($),x.add_callback(E)}else E();k&&W(!0)};re(()=>{_=!1,a(R),_||y(null,null)},T),N&&(u=xe)}function Ne(e,a,l=a){var u=ge(),r=new WeakSet;Te(e,"input",n=>{var s=n?e.defaultValue:e.value;if(s=U(e)?q(s):s,l(s),w!==null&&r.add(w),u&&s!==(s=a())){var T=e.selectionStart,_=e.selectionEnd;e.value=s??"",_!==null&&(e.selectionStart=T,e.selectionEnd=Math.min(_,e.value.length))}}),(N&&e.defaultValue!==e.value||ye(a)==null&&e.value)&&(l(U(e)?q(e.value):e.value),w!==null&&r.add(w)),ke(()=>{var n=a();if(e===document.activeElement){var s=$e??w;if(r.has(s))return}U(e)&&n===q(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function U(e){var a=e.type;return a==="number"||a==="range"}function q(e){return e===""?null:+e}const Re={todos:[{id:1,text:"Learn Astro",completed:!0},{id:2,text:"Learn Svelte",completed:!0},{id:3,text:"Learn RxJS",completed:!1},{id:4,text:"Build a Todolist App",completed:!1},{id:5,text:"Write documentation",completed:!1},{id:6,text:"Deploy the app",completed:!1}],searchTerm:""},d=Ie(Re),je=()=>d.asObservable(),Fe=e=>{const a=d.getValue(),l={id:Date.now(),text:e,completed:!1};d.next({...a,todos:[...a.todos,l]})},Be=e=>{const a=d.getValue();d.next({...a,todos:a.todos.filter(l=>l.id!==e)})},Ue=e=>{const a=d.getValue();d.next({...a,searchTerm:e})},qe=e=>{const a=d.getValue();d.next({...a,todos:a.todos.map(l=>l.id===e?{...l,completed:!l.completed}:l)})},He=()=>{const e=d.getValue(),a=e.todos.every(l=>l.completed);d.next({...e,todos:e.todos.map(l=>({...l,completed:!a}))})},Oe=()=>{const e=d.getValue();d.next({...e,todos:e.todos.filter(a=>!a.completed)})};var We=K('<li class="flex items-center justify-between border-b p-2"><input type="checkbox" class="mr-2"/> <span> </span> <button class="ml-auto text-red-500">Delete</button></li>'),ze=K('<div class="mx-auto"><div class="mb-4"><input type="text" placeholder="Search todos..." class="w-full rounded border p-2 focus:outline-none"/></div> <div class="mb-4 flex"><input type="text" placeholder="Add a new todo" class="flex-grow rounded-l border p-2 focus:outline-none"/> <button class="rounded-r bg-blue-500 p-2 text-white">Add</button></div> <div class="mb-4 flex items-center justify-between"><div class="flex items-center space-x-2"><span class="font-bold text-green-600"> </span> <span class="font-bold text-yellow-600"> </span> <button class="btn btn-sm btn-outline btn-info"><!></button> <button class="btn btn-sm btn-outline btn-error">Delete Completed</button></div></div> <ul></ul></div>');function Qe(e,a){Ae(a,!1);const[l,u]=Ee(),r=()=>P(R,"$stats$",l),n=()=>P(_,"$filteredTodos$",l);let s=Se("");const T=je(),_=T.pipe(Z(({todos:t,searchTerm:o})=>t.filter(C=>C.text.toLowerCase().includes(o.toLowerCase())))),R=T.pipe(Z(({todos:t})=>({completed:t.filter(o=>o.completed).length,incompleted:t.filter(o=>!o.completed).length,allCompleted:t.length>0&&t.every(o=>o.completed)}))),m=()=>{b(s).trim()&&(Fe(b(s)),J(s,""))},E=t=>{const o=t.target;Ue(o.value)};ne();var y=ze(),f=v(y),c=v(f);i(f);var k=p(f,2),h=v(k);Y(h);var A=p(h,2);i(k);var x=p(k,2),S=v(x),$=v(S),j=v($);i($);var F=p($,2),Q=v(F);i(F);var D=p(F,2),X=v(D);{var ee=t=>{var o=M("Unselect All");L(t,o)},te=t=>{var o=M("Select All");L(t,o)};Le(X,t=>{r().allCompleted?t(ee):t(te,!1)})}i(D);var ae=p(D,2);i(S),i(x);var H=p(x,2);Ce(H,5,n,t=>t.id,(t,o)=>{var C=We(),V=v(C);Y(V);var I=p(V,2);let O;var se=v(I,!0);i(I);var le=p(I,2);i(C),G(oe=>{De(V,b(o).completed),O=Ve(I,1,"",null,O,oe),B(se,b(o).text)},[()=>({"line-through":b(o).completed})]),g("change",V,()=>qe(b(o).id)),g("click",le,()=>Be(b(o).id)),L(t,C)}),i(H),i(y),G(()=>{B(j,`Completed: ${r().completed??""}`),B(Q,`Incompleted: ${r().incompleted??""}`)}),g("input",c,E),Ne(h,()=>b(s),t=>J(s,t)),g("keydown",h,t=>t.key==="Enter"&&m()),g("click",A,m),g("click",D,function(...t){He?.apply(this,t)}),g("click",ae,function(...t){Oe?.apply(this,t)}),L(e,y),we(),u()}export{Qe as default};
