---
import Layout from '~/layouts/main.astro'
import { getCollection } from 'astro:content'

const newsEntries = await getCollection('news')
---

<Layout title="News">
  <div>
    <h1 class="p-2 font-serif text-2xl text-black">News</h1>
    <ul>
      {
        newsEntries.map((entry) => (
          <li class="mb-2">
            <a href={`/news/${entry.slug}`} class="text-blue-500 hover:underline">
              {entry.data.thumbnail && (
                <img
                  transition:name={`new-image-${entry.slug}`}
                  src={entry.data.thumbnail}
                  alt={entry.data.title}
                  class="mr-4 h-32 w-32 object-cover"
                />
              )}
              <div>
                <h2 class="text-xl">{entry.data.title}</h2>
                <p class="text-gray-600">{entry.data.description}</p>
                <time datetime={entry.data.pubDate.toISOString()} class="text-sm text-gray-500">
                  {entry.data.pubDate.toDateString()}
                </time>
              </div>
            </a>
            <hr />
          </li>
        ))
      }
    </ul>
  </div>
</Layout>
